<% if @OPERATION is 'add' or @OPERATION is 'delete' : %>

    <!-- Выводим собственные аттрибуты термина -->
	<% for key, value of @FIELDS[@ENTITY] when key not in ['ENTITY'] : %>
		<tr>
			<td><%= @locale[key] or @locale[key.toLowerCase()] or key %></td>
		    <td>
                <% include "configuration/entities/_show_attribute", _.merge @, attributes: @FIELDS[@ENTITY], key: key %>
            </td>
		</tr>
	<% end %>

    <!-- Выводим аттрибуты термина принадлежащие категории -->
    <% for key, value of @FIELDS.term2category[0] when key not in ['TERM_ID', 'CATEGORY_ID', 'ENTITY'] : %>
        <tr>
            <td><%= @locale[key] or @locale[key.toLowerCase()] or key %></td>
            <td>
                <% if @mutators[key] : %>
                    <%- @mutators[key](@FIELDS.term2category[0][key], @ENTITY) %>
                <% else : %>
                    <%= @locale[@FIELDS.term2category[0][key]] or @FIELDS.term2category[0][key] %>
                <% end %>
            </td>
        </tr>
    <% end %>

    <!-- Выводим категорию термина -->
    <tr>
        <td><%= @locale.category_id %></td>
        <td><%= @FIELDS.CATEGORY.DISPLAY_NAME %></td>
    </tr>

<% else : %>

    <!-- Выводим собственные аттрибуты термина -->
    <% if @FIELDS.diff_keys[@ENTITY] : %>
        <% for key in @FIELDS.diff_keys[@ENTITY] when key not in ['OWNER', 'ENTITY'] : %>
            <tr>
                <td><%=  @locale[key] or @locale[key.toLowerCase()] or key %></td>
                <% for k in ['old', 'new'] : %>
                    <td>
                        <% include "configuration/entities/_show_attribute", _.merge @, attributes: @FIELDS[k][@ENTITY], key: key %>
                    </td>
                <% end %>
            </tr>
        <% end %>
    <% end %>

    <!-- Выводим аттрибуты термина принадлежащие категории -->
    <% if @FIELDS.diff_keys.term2category : %>
        <% for key in @FIELDS.diff_keys.term2category[0] when key not in ['CATEGORY_ID', 'ENTITY'] : %>
            <tr>
                <td><%=  @locale[key] or @locale[key.toLowerCase()] or key %></td>
                <% for k in ['old', 'new'] : %>
                    <td>
                        <% include "configuration/entities/_show_attribute", _.merge @, attributes: @FIELDS[k].term2category[0], key: key %>
                    </td>
                <% end %>
            </tr>
        <% end %>
    <% end %>

    <!-- Выводим категорию термина -->
    <% if @FIELDS.diff_keys.category : %>
        <tr>
            <td><%= @locale.category_id %></td>
            <% for k in ['old', 'new'] : %>
                <td>
                    <% for category in @FIELDS[k].category : %>
                        <%= @locale[category.DISPLAY_NAME] or category.DISPLAY_NAME %></br>
                    <% end %>
                </td>
            <% end %>
        </tr>
    <% end %>

<% end %>
