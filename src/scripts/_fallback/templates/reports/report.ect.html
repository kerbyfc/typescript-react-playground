<section class="[ content__indent _scrollable _autoHeight ]" data-content>
    <header class="contentHeader">
        <h2 class="contentHeader__title"><%- App.t "reports.report.#{@isNew and 'add' or 'edit'}_title" %></h2>
    </header>

    <form class="create-report form">
        <div class="[ form__row size-1-2 ]">
            <label class="form__label"><%- App.t "global.name" %></label>
            <div class="[ form__elem size-1-2 ]">
                <input type="text" name="DISPLAY_NAME" value="<%= @DISPLAY_NAME %>" placeholder="<%- App.t "reports.placeholders.name" %>">
            </div>
        </div>
        <div class="form__row">
            <label class="form__label"><%- App.t "global.description" %></label>
            <div class="form__elem">
                <textarea name="NOTE" placeholder="<%- App.t "reports.placeholders.note" %>"><%= @NOTE %></textarea>
            </div>
        </div>
        <div class="form__row">

            <% if not @FOLDER_ID: %>
                <label class="form__label"><%- App.t "reports.access.report" %></label>
                <div class="[ form__elem size-200 ]">
                    <select name="IS_PERSONAL" <%- if not @canBePrivatized then "disabled" %>>
                        <option data-icon-class="icon _accessPublic" value="0"><%- App.t "reports.access.personal.0" %></option>
                        <option data-icon-class="icon _accessPersonal" value="1"><%- App.t "reports.access.personal.1" %></option>
                    </select>
                </div>
            <% else: %>
                <input type="hidden" name="IS_PERSONAL" value="<%- @IS_PERSONAL %>">
            <% end %>

            <div class="[ form__elem size-25 ]">
                <!-- push for checkbox -->
            </div>
            <div class="[ form__elem size-300 ]">
                <label class="form__checkbox">
                    <input type="checkbox" name="OPTIONS[useCommonPeriod]">
                    <span></span><%- App.t "reports.common_period" %>
                </label>
            </div>

            <div class="form__col" data-region="commonPeriod"></div>

        </div>

        <div class="create-report__widgets">

            <div class="form__row" data-affix>

              <div class="form__elem size-150">
                <a href="/reports/<%= @QUERY_REPORT_ID or "new" %>/widgets/new" data-action="add_widget" data-bypass class="button"><%- App.t "reports.add_widget" %></a>
              </div>

              <div data-edit-mode-msg
                   class="form__message create-report__edit-mode-msg form__elem size-max">
                  <%- App.t 'reports.report.edit_mode' %>
              </div>

            </div>
        </div>

        <div class="create-report__preview" data-region="widgetGrid">

        </div>
    </form>
</section>

<footer class="content__footer">
    <button class="[ button _success ]" type="submit" data-action="save_execute"><%- App.t "reports.save_n_execute" %></button>
    <button class="button" type="button" data-action="save"><%- App.t "global.save" %></button>
    <button class="button" type="reset" data-action="cancel" ><%- App.t "global.cancel" %></button>
</footer>
